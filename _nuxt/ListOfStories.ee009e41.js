import{_ as K}from"./entry.bce2c9da.js";import Q from"./StoryTag.83153752.js";import U from"./Card.6cbfec30.js";import{n as W,_ as X}from"./query.183e7275.js";import{v as Y,x as J,y as Z,z as j,A as ee,B as te,i as se,q as ae}from"./state.bdf7fec3.js";import{u as O,W as ne,M as n,N as i,P as g,O as x,y as a,a9 as p,aa as b,T as w,ac as C,U as D,X as V,Q as le,Y as oe}from"./runtime-core.esm-bundler.4dba96d9.js";import"./index.288f722b.js";import"./_plugin-vue_export-helper.c27b6911.js";const re={class:"py-10 px-5 md:px-10"},ce=g("h1",{class:"mb-4 font-Special text-5xl text-secondary-800 dark:text-primary-200"},"Lugude nimekiri",-1),ie={class:"flex gap-4 mt-10"},ue={class:"border-solid border overflow-hidden bg-white py-6 px-4 rounded-xl transition-all dark:bg-secondary-900 dark:border-secondary-700"},de={key:0,class:"flex flex-wrap gap-x-2 gap-y-2"},pe={key:1,class:"flex flex-wrap gap-x-2 gap-y-2"},ge={key:2,class:"flex flex-wrap gap-x-2 gap-y-2"},ve={class:"grid gap-4 mt-10 items-center sm:grid-cols-2 md:grid-cols-3 md:gap-6 lg:grid-cols-4 lg:gap-8"},Ce={__name:"ListOfStories",async setup(_e){let v,S;const A=(s,e)=>{const l="ABCDEFGHIJKLMNOPQRSTUVWXYZÕÄÖÜ";return s.localeCompare(e,"et",{alphabet:l})},E=[],_=O(),o=Y(),m=J(),z=s=>{if(o.value.find(e=>e===s)){const e=o.value.filter(l=>l!=s);o.value=e}else o.value.push(s)},M=()=>[..._.value].sort(A),B=[],f=O(),r=Z(),y=j(),R=s=>{if(r.value.find(e=>e===s)){const e=r.value.filter(l=>l!=s);r.value=e}else r.value.push(s)},T=()=>[...f.value].sort(A),G=[],h=O(),c=ee(),k=te(),q=s=>{if(c.value.find(e=>e===s)){const e=c.value.filter(l=>l!=s);c.value=e}else c.value.push(s)},F=()=>[...h.value].sort(A),P=s=>{s==="person"?(m.value=!0,y.value=!1,k.value=!1,r.value=[],c.value=[]):s==="genre"?(y.value=!0,m.value=!1,k.value=!1,o.value=[],c.value=[]):(k.value=!0,m.value=!1,y.value=!1,o.value=[],r.value=[])},{path:N}=W(),{data:L}=([v,S]=ne(()=>se("stories",async()=>ae("_lood").only(["description","_path","person","genre","tags"]).find())),v=await v,S(),v);for(const s of L.value)s.person.forEach(e=>{E.push(e)}),s.genre.forEach(e=>{B.push(e)}),s.tags.forEach(e=>{G.push(e)});return _.value=[...new Set(E)],_.value=M(),f.value=[...new Set(B)],f.value=T(),h.value=[...new Set(G)],h.value=F(),(s,e)=>{const l=K,$=Q,H=U,I=X;return n(),i("section",re,[ce,g("section",ie,[x(l,{icon:"icon-park-outline:triangle-round-rectangle",label:"ŽANR",onClick:e[0]||(e[0]=t=>P("genre")),class:"bg-white dark:bg-secondary-900/70"}),x(l,{icon:"icon-park-outline:peoples",label:"TEGELASED",onClick:e[1]||(e[1]=t=>P("person")),class:"bg-white dark:bg-secondary-900/70"}),x(l,{icon:"icon-park-outline:globe",label:"KOHAD",onClick:e[2]||(e[2]=t=>P("place")),class:"bg-white dark:bg-secondary-900/70"})]),g("div",ue,[a(m)?(n(),i("div",de,[(n(!0),i(p,null,b(a(_),(t,d)=>(n(),w($,{key:`person${d}`,label:t,isActive:a(o).includes(t),onClick:u=>z(t)},null,8,["label","isActive","onClick"]))),128))])):C("",!0),a(k)?(n(),i("div",pe,[(n(!0),i(p,null,b(a(h),(t,d)=>(n(),w($,{key:`place${d}`,label:t,isActive:a(c).includes(t),onClick:u=>q(t)},null,8,["label","isActive","onClick"]))),128))])):C("",!0),a(y)?(n(),i("div",ge,[(n(!0),i(p,null,b(a(f),(t,d)=>(n(),w($,{key:`genre${d}`,label:t,isActive:a(r).includes(t),onClick:u=>R(t)},null,8,["label","isActive","onClick"]))),128))])):C("",!0)]),g("div",ve,[(n(!0),i(p,null,b(a(L),(t,d)=>(n(),i(p,null,[(a(o).length==0||t.person.some(u=>a(o).includes(u)))&&(t.genre.some(u=>a(r).includes(u))||a(r).length==0&&(t.tags.some(u=>a(c).includes(u))||a(c).length==0))?(n(),w(I,{to:t._path,key:`story${d}`},{default:D(()=>[x(H,{class:V(["bg-white ring-1 ring-secondary-300 shadow transition dark:bg-secondary-800 dark:ring-secondary-700 hover:shadow-lg dark:hover:ring-secondary-500",a(N)==t._path?"bg-yellow-100 dark:bg-primary-400 dark:text-primary-800":""]),style:oe(`transform:rotate(${-3+Math.random()*6}deg)`)},{default:D(()=>[g("p",{class:V(["font-Special text-xl leading-tight text-secondary-800 dark:text-secondary-300",a(N)==t._path?"dark:text-primary-900":""])},le(t.description),3)]),_:2},1032,["class","style"])]),_:2},1032,["to"])):C("",!0)],64))),256))])])}}};export{Ce as default};
