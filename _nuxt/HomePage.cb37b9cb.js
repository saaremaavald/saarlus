import{_ as O}from"./query.e7d1900b.js";import{g as R,l as z,q as D}from"./CloseButton.cc3459e4.js";import{a as E}from"./HomePage.vue.65e77141.js";import{_ as T}from"./_plugin-vue_export-helper.c27b6911.js";import{X as Z,u as p,F as H,R as G,v as Q,M as f,N as h,P as t,a2 as U,$ as X,y as i,Y,Z as J,z as K,O as W,U as tt,Q as et,ae as at,ab as st,ac as rt}from"./runtime-core.esm-bundler.8a841934.js";const _=m=>(st("data-v-c49208de"),m=m(),rt(),m),ot={class:"mx-auto flex flex-col justify-around min-h-[80vh] gap-0 lg:flex-row lg:justify-center lg:gap-[5vw] lg:max-w-6xl"},nt=_(()=>t("h1",{class:"font-Special font-bold text-primary-700 text-5xl leading-[0.75] tracking-tighter lg:text-[7vw] lg:leading-[0.75] dark:text-primary-400"}," Saarluse kompass ",-1)),lt=_(()=>t("h2",{class:"mt-8 font-Special text-secondary-800 text-4xl uppercase dark:text-secondary-500"},"Mis see veel on?",-1)),ct={class:"relative flex grow-0 justify-center items-center order-1 lg:order-2"},it={viewBox:"0 0 100 100",class:"h-[70vmin] w-[70vmin] lg:h-[60vmin] lg:w-[60vmin]"},dt=_(()=>t("filter",{id:"displacementFilter"},[t("feTurbulence",{type:"turbulence",baseFrequency:"0.08",numOctaves:"7",result:"turbulence"}),t("feDisplacementMap",{in2:"turbulence",in:"SourceGraphic",scale:"1.25",xChannelSelector:"R",yChannelSelector:"B"})],-1)),pt={style:{filter:"url(#displacementFilter)"}},mt={transform:"translate(50,50)"},ut=at('<circle r="10" stroke-width="0.5" class="fill-none stroke-secondary-500" data-v-c49208de></circle><polyline points="0,-46 7,0 0,25 -7,0" class="fill-secondary-800" data-v-c49208de></polyline><polyline points="0,-35 5,0 -5,0" class="fill-primary-200 dark:fill-primary-600" data-v-c49208de></polyline><circle r="8" class="fill-secondary-800" data-v-c49208de></circle><circle r="6.5" class="fill-secondary-300 dark:fill-primary-600" data-v-c49208de></circle><path d="M 0 -1.5 L 0,1.5 -1.5,0 Z" transform="translate(0,-3)" class="fill-secondary-800" data-v-c49208de></path><path d="M 0 -1.5 L 0,1.5 -1.5,0 Z" transform="translate(-3,0) rotate(90)" class="fill-secondary-800" data-v-c49208de></path>',7),yt=["d"],ft=["cx","cy","data-idx","onClick"],ht={class:"p-2 rounded border bg-white text-primary-800 dark:bg-secondary-900 dark:text-primary-200 dark:border-secondary-800"},_t=_(()=>t("span",{class:"bg-primary-700 text-primary-50 px-3 py-1 rounded"},"LOE",-1)),gt={__name:"HomePage",async setup(m){let u,k;const b=(e,s=1,a=0)=>Array.from({length:e}).map((c,r)=>typeof s=="function"?s(r+a):r*s+a),g=(e,s)=>[Math.cos((e-90)*(Math.PI/180))*s,Math.sin((e-90)*(Math.PI/180))*s].map(a=>C(a)),C=(e,s=8)=>parseFloat(e.toFixed(s)),N=(e,s,a=[0,0])=>{const[c,r]=a;return b(e,n=>n*(360/e)).map(n=>g(n,s)).map(([n,y])=>[n+c,y+r])},A=(e,s,a,c,r)=>{const n=g(r,a),y=g(c,a),q=r-c<=180?"0":"1";return["M",n[0],n[1],"A",a,a,0,q,0,y[0],y[1]].join(" ")},{data:x}=([u,k]=Z(()=>R("stories",async()=>D("_lood").only(["description","_path"]).find())),u=await u,k(),u),v=x.value.length,F=360/v,w=p(0),d=p(0);let S=0,o=p(0);const j=p(N(v,47)),B=p(A(0,0,3,0,270));let l;const I=()=>F*o.value-d.value,L=()=>{o.value=Math.round(Math.random()*v)},P=()=>{w.value=I(),S=d.value,l.seek(0),l.pause(),l.remove(d),l.delay=0,l.duration=0,l.add({targets:d,value:[S,`+=${w.value+Math.floor(Math.random()*4)*360}`],duration:1400}),l.restart()},V=H(()=>`transform: rotate(${d.value}deg)`),M=z(),$=()=>{M.value=!M.value};return G(()=>{l=E.timeline({easing:"cubicBezier(0.645, 0.045, 0.355, 1.000)",direction:"normal",duration:2e3,autoplay:!1}),o.value=Math.floor(Math.random()*44)}),Q(o,e=>{P()}),(e,s)=>{const a=O;return f(),h("section",ot,[t("div",{class:"flex flex-col justify-center order-2 grow text-center lg:order-1 lg:text-left lg:items-start"},[nt,lt,t("p",{class:"font-Normal mt-2 text-secondary-900 dark:text-secondary-400"},[U("Siit leiad sa hulga materjale, mis aitavad sul saarlust paremini mõista. Alustuseks võid lihtsalt kompassil klikkida või valida "),t("a",{class:"text-primary-600 cursor-pointer dark:text-rimary-400",onClick:$},"sobiv lugu nimekirjast")])]),t("div",ct,[(f(),h("svg",it,[dt,t("g",pt,[t("g",mt,[t("g",{style:X(i(V))},[ut,t("path",{d:i(B),"stroke-width":"1",class:"fill-none stroke-secondary-800"},null,8,yt)],4)]),t("g",{transform:"translate(50,50)"},[t("circle",{r:"12",onClick:L,style:{cursor:"pointer"},fill:"hsla(0,0%,100%,0)"})]),(f(!0),h(Y,null,J(i(j),(c,r)=>(f(),h("circle",{cx:c[0]+50,cy:c[1]+50,r:"1","data-idx":r,key:`point+${r}`,onClick:n=>K(o)?o.value=r:o=r,class:"compass-story fill-primary-600"},null,8,ft))),128))])])),W(a,{to:i(x)[i(o)]._path,class:"absolute top-2/3 left-1/4 w-1/2 -mt-6 text-lg text-center leading-tight font-Special cursor-pointer"},{default:tt(()=>[t("p",ht,et(i(x)[i(o)].description),1),_t]),_:1},8,["to"])])])}}},bt=T(gt,[["__scopeId","data-v-c49208de"]]);export{bt as default};
